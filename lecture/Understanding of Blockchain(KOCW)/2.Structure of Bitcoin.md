# 1. 비트코인 소개

- 2009년 Satoshi Nakamoto가 개발한 대표적인 공공 블록체인

## 주요 특징

- 블록의 무결성 및 채굴, 주소 계산 등을 위한 암호 해시(SHA-256) 사용
- 개인키/공개키 기반의 전자 서명 알고리즘 이용
- 블록체인의 합의 방식으로 “작업 증명”(Proof of Work) 정책 채택

- 신규 화폐는 채굴(mining)에 의해 발행되며, 평균 10분마다 새로운 블록 생성
    - 한 블록의 평균 크기 = 1.6Mbyte, 한 블럭당 약 3,000~6,000개의 트랜잭션이 포함
        - 2024년 8월 기준 : 블록체인의 크기 = 592Gbyte, 트랜잭션 수.  10억개 이상
    - 인플레이션을 방지하기 위해 통화 발행을 2,100만 개로 제한
        - 2024년 8월 기준 누적 채굴량 = 1,971만개 (약 94%)

# 2. 암호 해시의 개념

## SHA-256

- 입력 문서를 고정 길이(256비트)의 데이터로 변환
- 변환된 데이터는 문서의 지문과 같은 역할을 수행
- 문서의 일부가 바뀌면 해시 값이 완전히 바뀌므로 문서의 조작 여부 확인 가능
- 단방향 속성 : 문서로부터 해시 값은 생성 가능. 반대 방향은 불가능

- 문서(다양한 크기) → 해시 함수(SHA-256) → 해시값 (256)비트

# 3. 키(key)와 주소

### 비트코인의 키는 개인 키와 공개 키로 구성

- 개인키(private key) : 개인만 알고 있는 비밀키 (256비트의 이진수로 구성)
- 공개키(public key) : 타인에게 공개되는 키 (520비트의 이진수로 구성)

### 개인키와 공개키를 이용한 응용 분야

- 비밀 메시지
- 전자 서명

## 비트코인의 주소

- 숫자와 문자로 구성된 문자열로 송금인/입금인을 표시할 때 사용

- 공개 키에 대해서 암호 해시 함수를 적용하여 생성
    - 공개 키 해시 = RIPEMD 160(SHA256(공개키)) ← 160bit
    - 사람이 쉽게 사용하도록 Base58Check로 변환 (대문자, 소문자, 숫자: I, l, 0, O는 제외)
    - 요즘에는 공개키 해시를 32개의 문자로 표시하는 형태로도 많이 표시 : “bc1” 문자열로 시작

# 4. 트랜잭션(거래) 처리

### Bitcoin에서 트랜잭션은 화폐(BTC)의 흐름을 표시

- 소유자는 보유하고 있는 화폐를 다른 사람에게 지불할 권한을 갖는다.
- 화폐를 받은 다른 소유자는 새로운 트랜잭션을 생성하여 화폐를 다시 전달
- 그 결과로 화폐의 소유권이 연결되어 구성

## UTXO (Unspent Transaction Outputs) 모델

- UTXO : 블록체인에 저장된 트랜잭션의 출력 중 다른 트랜잭션의 입력에 연결되지 않은 출력

### 사용자의 잔고 (balance)

- 사용자의 주소가 출력으로 등록된 UTXO의 합
- UTXO의 관리 : Wallet 프로그램이 담당

### IF (UTXO의 금액 > 지불하고자 하는 트랜잭션의 금액)

- UTXO의 금액은 전부를 사용하던가, 아니면 사용하지 않던가 둘 중의 하나. 일부만 사용 불가!
- 따라서 남는 금액을 돌려받는 새로운 UTXO를 생성

### 이중 지급 (double spending)

- UTXO를 여러 개의 트랜잭션의 입력으로 사용
- 트랜잭션과 블록 검증 단계에서 반드시 걸러야 함!

# 5. 블록체인의 구조

### 트랜잭션을 포함한 블록들의 “역방향” 연결 리스트

- 이전 블록의 헤더에 대한 해시 포인터로 연결
- SHA256(SHA256(이전 블록의 헤더 내용))

### 블록 헤더

- Version : 4 bytes, 버전 번호
- Previous Block Hash : 32 bytes, 이전 블록의 헤더에 대한 해시 정보
- Merkle Root : 32 bytes, 트랜잭션의 머클 트리 루트의 해시 값
    - 머클 트리 : 트랜잭션의 요약 정보
- Timestamp : 4 bytes, 이 블록의 생성 시간
- Difficulty Target : 4 bytes, PoW에서 이 블록 채굴을 위한 난이도 목표값
- Nonce : 4 bytes, PoW의 증빙

### 블록 바디 : 트랜잭션의 집합

- Transaction count : 1~9 bytes, 블록에 포함된 트랜잭션의 수
- Coinbase transaction
- Transaction #1
- Transaction #2
- …
- Transaction #1333

### 참고

- 블록 헤더의 Previous Block Hash는 블록 헤더의 위조, 변조를 방지
- 블록 헤더의 Merkle Root는 블록 바디의 위조, 변조를 방지
- Timestamp, Difficulty Target, Nonce는 블록 채굴에 관련된 내용

---

- 비트코인은 2009년에 개발된 대표적인 공공 블록체인이다.
- 비트코인에 저장된 트랜잭션은 화폐의 흐름을 나타낸다.
- 비트코인은 개인키와 공개키를 이용한 전자서명으로 화폐의 소유권을 증명한다.
- 비트코인의 블록은 암호 해시(SHA-256)를 이용한 체인으로 연결되어 있다.