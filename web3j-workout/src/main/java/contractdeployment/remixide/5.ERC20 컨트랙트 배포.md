## 5. ERC20 컨트랙트 배포

### 개요
ERC20은 이더리움 블록체인에서 토큰을 만들기 위한 표준 규격입니다. 모든 ERC20 토큰은 동일한 함수들을 제공하여 호환성을 보장합니다.

- 5.1 OpenZeppelin ERC20 사용

```
// SPDX-License-Identifier: MIT
// Compatible with OpenZeppelin Contracts ^5.4.0
pragma solidity ^0.8.27;

import {ERC20} from "@openzeppelin/contracts/token/ERC20/ERC20.sol";

contract DooToken is ERC20 {
    constructor(string memory name, string memory symbol) ERC20(name, symbol) {
        // 컨트랙트 배포자에게 1000개 토큰 발행 (소수점 18자리 적용)
        _mint(msg.sender, 1000*10**uint(decimals()));
    }
}
```

**코드 설명:**
- `ERC20(name, symbol)`: OpenZeppelin의 ERC20 표준 구현을 상속
- `_mint()`: 새로운 토큰을 생성하여 지정된 주소에 할당
- `msg.sender`: 컨트랙트를 배포하는 주소
- `decimals()`: ERC20 기본 소수점 자릿수 (18)



- 5.2 Remix IDE 사용하여 배포

**배포 과정:**
1. Remix IDE에서 솔리디티 코드 작성
2. 컴파일 후 Deploy 탭으로 이동
3. Environment를 'Injected Provider - MetaMask'로 설정
4. 생성자 파라미터(토큰명, 심볼) 입력 후 Deploy

![](https://available-provelone-952.notion.site/image/attachment%3Ae58568a2-6639-4308-a358-a8f40038ff30%3A%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2025-08-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.56.50.png?table=block&id=256e3743-251c-8044-877d-db481dc66bb8&spaceId=a24a69f3-060a-446e-9c9c-f79c2918e562&width=710&userId=&cache=v2)

Deploy 오른쪽에 토큰명, 심볼을 지정하고 Deploy를 클릭한다.

Deploy를 클릭하면 메타마스크로 자동 연결이 되면서 승인을 할건지 물어본다. 컨펌을 클릭한다. 

* Environment : Injected Provider - MetaMask 선택
  * 테스트용 지갑 선택 (0x658...B4f77) 
  * Network : Sepolia (11155111)

배포결과 :
https://sepolia.etherscan.io/tx/0x86fea44d8672166c881e82443264514c8cec6de88fa9ac69b0093b76659ddc5e

컨트랙트 주소 :  
0x026829Ae0db6CE391db1ec0ADee9a079Ab15C7b8


- 5.3 Remix IDE에서 배포한 ERC20 컨트랙트 함수 호출

**ERC20 주요 함수들:** 
  - **balanceOf**: 잔액 조회
    - 특정 주소의 토큰 보유량을 조회하는 읽기 전용 함수
    - 가스비 없음 (view 함수)
  - ![](https://available-provelone-952.notion.site/image/attachment%3A55ecd131-116e-4688-93ef-9c6fa15e9334%3A%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2025-08-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.20.00.png?table=block&id=256e3743-251c-80eb-bbd0-f02efb20a69c&spaceId=a24a69f3-060a-446e-9c9c-f79c2918e562&width=1320&userId=&cache=v2)
  - **transfer**: 토큰 전송
    - 내 토큰을 다른 주소로 직접 전송하는 함수
    - 가스비 필요 (상태 변경 함수)
    - 파라미터: to(받는 주소), amount(전송량)
  - ![](https://available-provelone-952.notion.site/image/attachment%3A316d1c69-eabd-4cae-8427-39e1eac76563%3A%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2025-08-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.26.03.png?table=block&id=256e3743-251c-807d-874f-e821259d09a2&spaceId=a24a69f3-060a-446e-9c9c-f79c2918e562&width=1320&userId=&cache=v2)
    - https://sepolia.etherscan.io/tx/0x301a16afda62ed807c1274244bbd70470cde60e444828f766561bc3dd79d2f4c
  - **approve**: 토큰 사용 승인
    - 다른 주소가 내 토큰을 사용할 수 있도록 승인해주는 함수
    - DeFi 프로토콜에서 주로 사용
    - 파라미터: spender(승인받을 주소), amount(승인량)
  - ![](https://available-provelone-952.notion.site/image/attachment%3A6400e9a8-3e05-4fed-8702-37629b9a55e5%3A%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2025-08-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.33.32.png?table=block&id=256e3743-251c-8026-9d8c-ed4293f06c83&spaceId=a24a69f3-060a-446e-9c9c-f79c2918e562&width=1370&userId=&cache=v2)
    - https://sepolia.etherscan.io/tx/0x7c6cc34f0efec491314ac63c9c7e61ba9456fc55fc65fa329dc36ed763dfbfb6
  - **transferFrom**: 대리 전송
    - 승인받은 토큰을 대신 전송하는 함수
    - approve 후에 사용 가능
    - 파라미터: from(보내는 주소), to(받는 주소), amount(전송량)

**함수 호출 순서:**
1. `balanceOf`: 초기 잔액 확인
2. `transfer`: 직접 전송 테스트
3. `approve`: 다른 주소에 사용 권한 부여
4. `transferFrom`: 승인된 권한으로 대리 전송
---

### 참고 자료
**Solidity 코드 작성:**
* [OpenZeppelin Wizard](https://wizard.openzeppelin.com/) - 컨트랙트 코드 자동 생성
* [ERC20 표준 문서](https://eips.ethereum.org/EIPS/eip-20)
* [Remix IDE](https://remix.ethereum.org/) - 온라인 솔리디티 개발환경